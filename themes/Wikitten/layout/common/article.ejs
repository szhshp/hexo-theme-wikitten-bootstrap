<div class="row" id="<%= post.layout %>-<%= post.slug %>">
  <% if (!index) { %>
  <div class="col-12">
    <div class="card">
      <div class="card-header p-2">
        <%- partial('post/category') %> <% if (theme.history_control.enable) {
        let edit_address =
        `${theme.history_control.edit_link}/${theme.history_control.user_name}/${theme.history_control.repository}`;
        let repository_address =
        `${theme.history_control.server_link}/${theme.history_control.user_name}/${theme.history_control.repository}`;
        let file_path =
        `${theme.history_control.branch}/source/${post.source}`;%>
        <div
          class="d-sm-none d-md-flex btn-group btn-group-sm float-right"
          role="group"
          aria-label="Basic example"
        >
          <a
            class="btn btn-outline-secondary py-0"
            href="<%= `${repository_address}/blob/${file_path}` %>"
            role="button"
            >Source</a
          >
          <a
            class="btn btn-outline-secondary py-0"
            href="<%= `${edit_address}/edit/${file_path}` %>"
            role="button"
            >Edit</a
          >
          <a
            class="btn btn-outline-secondary py-0"
            href="<%= `${repository_address}/commits/${file_path}` %>"
            role="button"
            >History</a
          >
        </div>
        <% } %>
      </div>
      <div class="d-flex justify-content-between p-2">
        <div>
          <%- partial('post/title', { class_name: '' }) %>
          <br />
          <%- partial('post/tag') %>
        </div>
        <div><%- partial('post/date') %></div>
      </div>
      <div class="tags m-2"></div>
      <div class="card-body row pt-0 m-0">
        <div class="article-entry w-100" itemprop="articleBody">
          <% if (post.toc !== false) { %>
          <div class="card border-dark m-1 sticky-top d-none" id="toc">
            <div
              class="card-header border-dark p-2 in"
              data-toggle="collapse"
              data-target=".toc-body"
              aria-expanded="true"
            >
              <i class="fa fa-th-list" aria-hidden="true"></i>
              <span class="collapse show">
                <%= __('article.catalogue') %>
              </span>
              <span class="float-right toc-body collapse show">
                <i class="fa fa-close" aria-hidden="true"></i>
              </span>
            </div>
            <div
              class="
                card-body
                text-dark
                border-dark
                p-0
                collapse
                toc-body toc
                show
              "
            >
              <!-- TOCBOT will be added here -->
            </div>
            <div class="card-footer border-dark p-2">
              <a href="https://szhshp.org/">https://szhshp.org/</a>
            </div>
          </div>
          <% } %> <%- post.content %>
        </div>
      </div>
    </div>
  </div>
  <% } else { %>
  <div class="d-inline py-0 col-md-6 col-sm-12">
    <%- partial('common/post/title', { post: post, index: true, class_name:
    'timeline-article-title text-black-50 timeline-title' }) %>
  </div>
  <div class="d-flex justify-content-end py-0 col-md-6 col-sm-12">
    <%- partial('common/post/category', { post: post }) %>
  </div>
  <% } %>
</div>

<% if (!index) { %> <%- partial('post/nav') %> <% } %> <% if (!index){ %>
<!-- baidu url auto push script -->
<script type="text/javascript">
  !(function () {
    var e = /([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,
      r = window.location.href,
      o = document.referrer;
    if (!e.test(r)) {
      var n = "//api.share.baidu.com/s.gif";
      o
        ? ((n += "?r=" + encodeURIComponent(document.referrer)),
          r && (n += "&l=" + r))
        : r && (n += "?l=" + r);
      var t = new Image();
      t.src = n;
    }
  })(window);
</script>
<% } %>
